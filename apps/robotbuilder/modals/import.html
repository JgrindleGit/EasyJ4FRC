<!-- Modal -->
<div class="modal fade" id="import" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">Import</h4>
			</div>
			<div class="modal-body">
				<textarea class="xmlcode"></textarea>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary loadbtn">Load</button> <!-- @todo warn them that all blocks will be lost -->
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function () {
		$('#import .loadbtn').click(function() {
			var toload = $('#import .modal-body textarea').val();
			console.log(toload);
			if (toload.length < 5) {
				alert("No Input");
				return;
			}
			try {
				var dom = Blockly.Xml.textToDom(toload);
				Blockly.mainWorkspace.clear();
				Blockly.Xml.domToWorkspace(Blockly.mainWorkspace, dom);
			} catch (e) {
				alert("Invalid xml")
			}
		});
		// $(document).on('show.bs.modal', function(event){
		// 	if ($(event.target).attr('id') == 'import') {

		// 		
		// 	}
		// })
	})
</script>