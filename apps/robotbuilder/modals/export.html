<!-- Modal -->
<div class="modal fade" id="export" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title" id="myModalLabel">Export</h4>
			</div>
			<div class="modal-body">
					<textarea class="xmlcode"></textarea>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function () {
		$(document).on('show.bs.modal', function(event){
			if ($(event.target).attr('id') == 'export') {
				var xmlDom = Blockly.Xml.workspaceToDom(Blockly.mainWorkspace);
				var xmlText = Blockly.Xml.domToPrettyText(xmlDom);
				$('#export .modal-body textarea').val(xmlText).focus();
			}
		})
	})
</script>