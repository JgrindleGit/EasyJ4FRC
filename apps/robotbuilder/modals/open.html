<!-- Modal -->
<div class="modal fade" id="open" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title">Open</h4>
			</div>
			<div class="modal-body">
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
<div id="examplewrapper" style="display:none">
	<div class="cloneable example">
		<!-- <h3>Robot Example</h3> -->
		<!-- <div class="inline-block"> -->
			<button type="button" class="btn btn-success load" style="margin-top:10px;">Load</button>
		<!-- </div>	 -->
		<!-- <div class="brief">Example showing use of a joystick and the drivetrain block.</div> -->
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function () {

		$(document).on('show.bs.modal', function(event){
			if ($(event.target).attr('id') == 'open') {
				// build the list of saves. @todo Make is scroll
					
				var saves = EasyJ.localStorage.listSaves();
				for (var i = 0; i < saves.length; i++) {
					console.log("Here:", saves[i], saves.length);
					var clone = $('#examplewrapper div:first').clone()
					$("button", clone).text("Load '"+saves[i]+"'");
					clone.appendTo($('#open .modal-body'));
				};				
			}
		});
		// $('#save .modal-footer .savebtn').click(function() {
		// 	var xmlDom = Blockly.Xml.workspaceToDom(Blockly.mainWorkspace);
		// 	var xmlText = Blockly.Xml.domToPrettyText(xmlDom);
		// 	localStorage.setItem('easyj_'+$('#save_filename').val(), xmlText);
		// 	//@todo tell the user that we saved for them!
		// 	$('#save').modal('hide');
		// });
	});
</script>